<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RU DEPOT Feedback</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Ramabhadra&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Mukta:wght@400;700&display=swap'); /* For Hindi */
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
        }
        .telugu-text {
            font-family: 'Ramabhadra', sans-serif;
            line-height: 1.6;
        }
        .hindi-text {
            font-family: 'Mukta', sans-serif;
            line-height: 1.5;
        }
        .question-card {
            transition: all 0.3s ease;
        }
        .question-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        
        /* Star Rating Styles */
        .star-rating {
            display: flex;
            flex-direction: row-reverse;
            justify-content: start;
            gap: 0.5rem;
        }
        .star-rating input { display: none; }
        .star-rating label {
            color: #d1d5db; /* Gray */
            font-size: 2rem;
            cursor: pointer;
            transition: color 0.2s;
        }
        .star-rating input:checked ~ label,
        .star-rating label:hover,
        .star-rating label:hover ~ label {
            color: #fbbf24; /* Gold */
        }
        
        /* Special styles for the highlighted card */
        .highlight-card:hover {
            transform: scale(1.02);
            box-shadow: 0 20px 25px -5px rgba(251, 191, 36, 0.3);
        }
    </style>
</head>
<body class="py-10 px-4">

    <div class="max-w-3xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden" id="mainContainer">
        
        <div class="bg-blue-900 pt-8 pb-8 px-6 text-center text-white border-b-4 border-yellow-500 relative overflow-hidden">
            
            <div class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none">
                <i class="fa-solid fa-train text-9xl absolute -top-10 -left-10 transform -rotate-12"></i>
                <i class="fa-solid fa-star text-8xl absolute top-10 right-10 animate-pulse"></i>
            </div>

            <div class="relative z-10">
                <div class="flex justify-center mb-4">
                    <div class="w-20 h-20 bg-white rounded-full flex items-center justify-center shadow-lg">
                        <i class="fa-solid fa-train-subway text-4xl text-blue-900"></i>
                    </div>
                </div>
                
                <h1 class="text-3xl font-bold mb-1 tracking-wide uppercase text-yellow-400 drop-shadow-md">RU DEPOT</h1>
                <h2 class="text-xl font-semibold text-blue-100 mb-6 tracking-widest">STAFF FEEDBACK FORM</h2>

                <div class="bg-white/10 backdrop-blur-md border border-white/20 rounded-xl p-5 max-w-xl mx-auto shadow-xl">
                    <div class="flex flex-col items-center gap-2">
                        <div class="bg-green-500 text-white rounded-full p-2 w-10 h-10 flex items-center justify-center shadow-md mb-1">
                            <i class="fa-solid fa-user-shield text-lg"></i>
                        </div>
                        
                        <h3 class="text-lg font-bold text-white uppercase tracking-wider border-b border-white/30 pb-1 mb-1">100% Anonymous</h3>
                        
                        <div class="space-y-2 text-sm text-blue-50">
                            <p class="font-medium">
                                <i class="fa-solid fa-circle-check text-green-400 mr-1"></i> Your name & phone number are <strong>NOT recorded</strong>.
                            </p>
                            <p class="hindi-text font-medium text-yellow-100">
                                <i class="fa-solid fa-circle-check text-green-400 mr-1"></i> आपकी पहचान गुप्त है। आपका नाम और नंबर रिकॉर्ड नहीं किया जाएगा।
                            </p>
                            <p class="telugu-text font-medium text-blue-100">
                                <i class="fa-solid fa-circle-check text-green-400 mr-1"></i> మీ వివరాలు గోప్యంగా ఉంటాయి. మీ పేరు మరియు నంబర్ నమోదు చేయబడవు.
                            </p>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <form id="feedbackForm" class="p-6 space-y-8">
            
            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">1. How satisfied are you with the handling of leave requests?</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">సెలవు అభ్యర్థనలను (Leave Requests) పరిష్కరించే విధానంతో మీరు ఎంత సంతృప్తిగా ఉన్నారు?</p>
                <div class="star-rating justify-end md:justify-start">
                    <input type="radio" id="q1-5" name="q1" value="5"><label for="q1-5" title="5 Stars"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q1-4" name="q1" value="4"><label for="q1-4" title="4 Stars"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q1-3" name="q1" value="3"><label for="q1-3" title="3 Stars"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q1-2" name="q1" value="2"><label for="q1-2" title="2 Stars"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q1-1" name="q1" value="1"><label for="q1-1" title="1 Star"><i class="fa-solid fa-star"></i></label>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">2. How would you rate the behaviour and approachability of the CCC when staff visit the office?</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">సిబ్బంది ఆఫీసుకి వచ్చినప్పుడు CCC వారి ప్రవర్తన మరియు అందుబాటులో ఉండే విధానాన్ని మీరు ఎలా రేట్ చేస్తారు?</p>
                <div class="star-rating justify-end md:justify-start">
                    <input type="radio" id="q2-5" name="q2" value="5"><label for="q2-5"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q2-4" name="q2" value="4"><label for="q2-4"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q2-3" name="q2" value="3"><label for="q2-3"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q2-2" name="q2" value="2"><label for="q2-2"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q2-1" name="q2" value="1"><label for="q2-1"><i class="fa-solid fa-star"></i></label>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">3. How satisfied are you with the response time and seriousness shown when staff raise complaints or issues?</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">సిబ్బంది ఫిర్యాదులు లేదా సమస్యలు చెప్పినప్పుడు, వారు స్పందించే సమయం మరియు చూపించే శ్రద్ధ పట్ల మీరు సంతృప్తిగా ఉన్నారా?</p>
                <div class="star-rating justify-end md:justify-start">
                    <input type="radio" id="q3-5" name="q3" value="5"><label for="q3-5"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q3-4" name="q3" value="4"><label for="q3-4"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q3-3" name="q3" value="3"><label for="q3-3"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q3-2" name="q3" value="2"><label for="q3-2"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q3-1" name="q3" value="1"><label for="q3-1"><i class="fa-solid fa-star"></i></label>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">4. Are you satisfied with the planning and management related to the increase in number of Coaching trains?</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">కోచింగ్ రైళ్ల సంఖ్య పెరగడానికి సంబంధించిన ప్లానింగ్ మరియు మేనేజ్‌మెంట్‌తో మీరు సంతృప్తిగా ఉన్నారా?</p>
                <div class="star-rating justify-end md:justify-start">
                    <input type="radio" id="q4-5" name="q4" value="5"><label for="q4-5"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q4-4" name="q4" value="4"><label for="q4-4"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q4-3" name="q4" value="3"><label for="q4-3"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q4-2" name="q4" value="2"><label for="q4-2"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q4-1" name="q4" value="1"><label for="q4-1"><i class="fa-solid fa-star"></i></label>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">5. How satisfied are you that the CCC answers phone calls and provides timely responses when contacted?</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">ఫోన్ చేసినప్పుడు CCC ఫోన్ లిఫ్ట్ చేయడం మరియు సరైన సమయంలో స్పందించడం పట్ల మీరు సంతృప్తిగా ఉన్నారా?</p>
                <div class="star-rating justify-end md:justify-start">
                    <input type="radio" id="q5-5" name="q5" value="5"><label for="q5-5"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q5-4" name="q5" value="4"><label for="q5-4"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q5-3" name="q5" value="3"><label for="q5-3"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q5-2" name="q5" value="2"><label for="q5-2"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q5-1" name="q5" value="1"><label for="q5-1"><i class="fa-solid fa-star"></i></label>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">6. Are you satisfied with the on-duty CC's booking pattern?</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">ఆన్-డ్యూటీ CC యొక్క బుకింగ్ ప్యాట్రన్‌తో మీరు సంతృప్తిగా ఉన్నారా?</p>
                <div class="star-rating justify-end md:justify-start">
                    <input type="radio" id="q6-5" name="q6" value="5"><label for="q6-5"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q6-4" name="q6" value="4"><label for="q6-4"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q6-3" name="q6" value="3"><label for="q6-3"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q6-2" name="q6" value="2"><label for="q6-2"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q6-1" name="q6" value="1"><label for="q6-1"><i class="fa-solid fa-star"></i></label>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">7. How would you rate the behaviour and cooperation of TPC staff?</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">TPC సిబ్బంది ప్రవర్తన మరియు సహకారాన్ని మీరు ఎలా రేట్ చేస్తారు?</p>
                <div class="star-rating justify-end md:justify-start">
                    <input type="radio" id="q7-5" name="q7" value="5"><label for="q7-5"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q7-4" name="q7" value="4"><label for="q7-4"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q7-3" name="q7" value="3"><label for="q7-3"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q7-2" name="q7" value="2"><label for="q7-2"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q7-1" name="q7" value="1"><label for="q7-1"><i class="fa-solid fa-star"></i></label>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">8. How would you rate the behaviour and cooperation of CMS staff?</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">CMS సిబ్బంది ప్రవర్తన మరియు సహకారాన్ని మీరు ఎలా రేట్ చేస్తారు?</p>
                <div class="star-rating justify-end md:justify-start">
                    <input type="radio" id="q8-5" name="q8" value="5"><label for="q8-5"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q8-4" name="q8" value="4"><label for="q8-4"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q8-3" name="q8" value="3"><label for="q8-3"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q8-2" name="q8" value="2"><label for="q8-2"><i class="fa-solid fa-star"></i></label>
                    <input type="radio" id="q8-1" name="q8" value="1"><label for="q8-1"><i class="fa-solid fa-star"></i></label>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">
                    9. The newly designed first page of our LR has received appreciation from DEE/TRSO/GTL and has been implemented uniformly across all lobbies of the GTL division. We value your opinion on this initiative. How do you rate its usefulness and design?
                </p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">
                    మన LR యొక్క కొత్త మొదటి పేజీ డిజైన్‌ను DEE/TRSO/GTL వారు ప్రశంసించారు మరియు GTL డివిజన్‌లోని అన్ని లాబీలలో దీనిని అమలు చేశారు. ఈ కొత్త మార్పు మీకు ఎంతగా ఉపయోగపడుతోంది? దీనిపై మీ అభిప్రాయాన్ని తెలపండి.
                </p>
                
                <div class="space-y-3 mt-4">
                    <label class="flex items-center space-x-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-blue-50 transition bg-white shadow-sm" onclick="showDescriptionBox()">
                        <input type="radio" name="q10" value="Excellent" class="w-5 h-5 text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700 font-medium">Excellent Initiative (చాలా బాగుంది)</span>
                    </label>
                    
                    <label class="flex items-center space-x-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-blue-50 transition bg-white shadow-sm" onclick="showDescriptionBox()">
                        <input type="radio" name="q10" value="Very Useful" class="w-5 h-5 text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700 font-medium">Very Useful (చాలా ఉపయోగకరంగా ఉంది)</span>
                    </label>
                    
                    <label class="flex items-center space-x-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-blue-50 transition bg-white shadow-sm" onclick="showDescriptionBox()">
                        <input type="radio" name="q10" value="Good" class="w-5 h-5 text-blue-600 focus:ring-blue-500">
                        <span class="text-gray-700 font-medium">Good (బాగుంది)</span>
                    </label>
                    
                    <label class="flex items-center space-x-3 cursor-pointer p-3 border border-gray-200 rounded-lg hover:bg-blue-50 transition bg-white shadow-sm" onclick="showDescriptionBox()">
                        <input type="radio" name="q10" value="Not Useful" class="w-5 h-5 text-red-600 focus:ring-red-500">
                        <span class="text-red-700 font-medium">Not Useful (ఉపయోగకరంగా లేదు)</span>
                    </label>
                    
                    <div id="q10-desc-container" class="hidden mt-4 animate-fade-in p-4 bg-blue-50 rounded-lg border border-blue-100">
                        <label class="block text-xs text-blue-800 font-bold mb-2 uppercase">
                            <i class="fa-solid fa-pen mr-1"></i> Add a Suggestion / Reason (Optional):
                        </label>
                        <textarea id="q10-other-text" class="w-full p-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors" rows="2" placeholder="Write here... (ఇక్కడ రాయండి)"></textarea>
                        
                        <div class="flex justify-end mt-2">
                            <button type="button" onclick="saveSuggestion()" class="bg-green-600 hover:bg-green-700 text-white text-xs font-bold py-2 px-6 rounded shadow-sm transition transform active:scale-95">
                                OK <i class="fa-solid fa-check ml-1"></i>
                            </button>
                        </div>
                        
                        <p id="q10-saved-msg" class="hidden text-green-600 text-xs font-bold mt-2 text-right">
                            <i class="fa-solid fa-circle-check"></i> Details Saved!
                        </p>
                    </div>
                </div>
            </div>

            <div class="question-card bg-gray-50 p-5 rounded-xl border border-gray-200">
                <p class="font-bold text-gray-800 mb-1">10. General Suggestions/Complaints/Appreciation:</p>
                <p class="text-sm text-gray-600 mb-2">Please share any suggestions, complaints, or appreciation, if any, to help improve staff functioning and management in the coming years.</p>
                <p class="telugu-text text-gray-600 mb-3 text-sm">రాబోయే సంవత్సరాల్లో స్టాఫ్ పనితీరు మరియు మేనేజ్‌మెంట్‌ను మెరుగుపరచడానికి మీ సలహాలు, ఫిర్యాదులు లేదా అభినందనలు ఉంటే దయచేసి తెలియజేయండి.</p>
                <textarea id="q11" rows="3" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Type here (Required) / ఇక్కడ తప్పనిసరిగా రాయండి..."></textarea>
            </div>

            <div class="question-card highlight-card bg-gradient-to-br from-amber-50 to-orange-50 p-8 rounded-2xl border-4 border-yellow-500 shadow-2xl relative mt-10">
                
                <div class="absolute -top-5 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white text-sm font-bold px-6 py-2 rounded-full shadow-lg tracking-widest border-2 border-white flex items-center gap-2 z-10 whitespace-nowrap">
                    <i class="fa-solid fa-star text-yellow-200 animate-pulse"></i> OVERALL RATING <i class="fa-solid fa-star text-yellow-200 animate-pulse"></i>
                </div>

                <div class="text-center mt-2 mb-6">
                    <p class="font-bold text-gray-800 text-xl mb-2">
                        How would you rate the overall performance of the CCC in the last 6 months?
                    </p>
                    <p class="telugu-text text-gray-600 font-medium text-lg">
                        గత 6 నెలల్లో CCC యొక్క మొత్తం పనితీరును మీరు ఎలా రేట్ చేస్తారు?
                    </p>
                </div>

                <div class="flex justify-center">
                    <div class="star-rating gap-2">
                        <input type="radio" id="q9-5" name="q9" value="5"><label for="q9-5" class="hover:scale-125 transition-transform p-1" title="Excellent"><i class="fa-solid fa-star text-3xl"></i></label>
                        <input type="radio" id="q9-4" name="q9" value="4"><label for="q9-4" class="hover:scale-125 transition-transform p-1" title="Good"><i class="fa-solid fa-star text-3xl"></i></label>
                        <input type="radio" id="q9-3" name="q9" value="3"><label for="q9-3" class="hover:scale-125 transition-transform p-1" title="Average"><i class="fa-solid fa-star text-3xl"></i></label>
                        <input type="radio" id="q9-2" name="q9" value="2"><label for="q9-2" class="hover:scale-125 transition-transform p-1" title="Poor"><i class="fa-solid fa-star text-3xl"></i></label>
                        <input type="radio" id="q9-1" name="q9" value="1"><label for="q9-1" class="hover:scale-125 transition-transform p-1" title="Very Poor"><i class="fa-solid fa-star text-3xl"></i></label>
                    </div>
                </div>
            </div>

            <button type="button" onclick="sendFeedback()" id="sendBtn"
                class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-4 px-6 rounded-xl hover:from-blue-700 hover:to-purple-700 transition-all duration-300 shadow-lg text-lg flex justify-center items-center mt-6">
                Submit Feedback (పంపండి)
            </button>

            <div id="statusMsg" class="hidden text-center p-4 rounded-lg font-bold"></div>
        </form>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCpEMtX1eP7YwZDH0qLBRGci6VkhBgcJVo",
            authDomain: "feedback-4ace7.firebaseapp.com",
            projectId: "feedback-4ace7",
            storageBucket: "feedback-4ace7.firebasestorage.app",
            messagingSenderId: "331705524032",
            appId: "1:331705524032:web:7e8d046e71984f74a6e4a5",
            measurementId: "G-0WL2N0YFQ1"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Show description box for ALL options
        window.showDescriptionBox = function() {
            const container = document.getElementById('q10-desc-container');
            container.classList.remove('hidden');
            
            // Reset visual state on option change
            const msg = document.getElementById('q10-saved-msg');
            const area = document.getElementById('q10-other-text');
            msg.classList.add('hidden');
            area.classList.remove('border-green-500', 'ring-1', 'ring-green-500', 'bg-green-50');
            area.classList.add('border-gray-300');
        };

        // Handle OK Button Click
        window.saveSuggestion = function() {
            const area = document.getElementById('q10-other-text');
            const msg = document.getElementById('q10-saved-msg');
            const text = area.value.trim();

            // Visual Feedback for "Saved"
            area.classList.remove('border-gray-300');
            area.classList.add('border-green-500', 'ring-1', 'ring-green-500', 'bg-green-50');
            
            msg.classList.remove('hidden');
            setTimeout(() => {
                msg.classList.add('hidden');
            }, 3000);
        };

        window.sendFeedback = async function() {
            const sendBtn = document.getElementById('sendBtn');
            const status = document.getElementById('statusMsg');
            
            let feedbackData = {
                date: serverTimestamp()
            };

            // 1. Validate Star Ratings (Q1 to Q8 only)
            for (let i = 1; i <= 8; i++) {
                const selected = document.querySelector(`input[name="q${i}"]:checked`);
                if (!selected) {
                    alert(`Please give a rating for Question ${i} \nదయచేసి ${i}వ ప్రశ్నకు రేటింగ్ ఇవ్వండి.`);
                    
                    const questionCard = document.querySelector(`input[name="q${i}"]`).closest('.question-card');
                    questionCard.scrollIntoView({behavior: "smooth", block: "center"});
                    questionCard.classList.add('ring-4', 'ring-red-400');
                    setTimeout(() => questionCard.classList.remove('ring-4', 'ring-red-400'), 2000);
                    
                    return; 
                }
                feedbackData[`q${i}`] = parseInt(selected.value); 
            }

            // 2. Validate Q9 (Internal ID q10)
            const q10Radio = document.querySelector('input[name="q10"]:checked');
            if (!q10Radio) {
                alert("Please select an option for Question 9 (LR Feedback).\nదయచేసి 9వ ప్రశ్నకు (LR Feedback) ఒక ఆప్షన్ ఎంచుకోండి.");
                const questionCard = document.querySelector('input[name="q10"]').closest('.question-card');
                questionCard.scrollIntoView({behavior: "smooth", block: "center"});
                return;
            }

            // Combine Radio Value + Suggestion Text
            const q10Text = document.getElementById('q10-other-text').value.trim();
            
            // Mandatory check if 'Not Useful' is selected
            if(q10Radio.value === "Not Useful" && q10Text === "") {
                 alert("Please specify why it is 'Not Useful'.\n'Not Useful' అని ఎంచుకున్నారు కాబట్టి దయచేసి కారణం రాయండి.");
                 document.getElementById('q10-other-text').focus();
                 return;
            }

            if(q10Text !== "") {
                feedbackData['q10'] = q10Radio.value + " - " + q10Text;
            } else {
                feedbackData['q10'] = q10Radio.value;
            }

            // 3. Validate Q10 (Internal ID q11) - TEXT AREA
            const q11Val = document.getElementById('q11').value.trim();
            if(q11Val === "") {
                alert("Please answer Question 10 (General Suggestions).\nదయచేసి 10వ ప్రశ్నకు (General Suggestions) సమాధానం రాయండి.");
                const el = document.getElementById('q11');
                el.focus();
                el.closest('.question-card').scrollIntoView({behavior: "smooth", block: "center"});
                return;
            }
            feedbackData['q11'] = q11Val;
            
            // 4. Validate OVERALL RATING (Last Q)
            const q9Selected = document.querySelector('input[name="q9"]:checked');
            if (!q9Selected) {
                alert("Please provide the Overall Rating (Last Question).\nదయచేసి చివరన ఉన్న 'Overall Rating' ఇవ్వండి.");
                
                const questionCard = document.querySelector('input[name="q9"]').closest('.question-card');
                questionCard.scrollIntoView({behavior: "smooth", block: "center"});
                questionCard.classList.add('ring-4', 'ring-red-400');
                setTimeout(() => questionCard.classList.remove('ring-4', 'ring-red-400'), 2000);
                
                return;
            }
            feedbackData['q9'] = parseInt(q9Selected.value);

            // Disable button
            sendBtn.disabled = true;
            sendBtn.innerHTML = '<i class="fa-solid fa-circle-notch fa-spin mr-2"></i> Submitting...';

            try {
                await addDoc(collection(db, "feedbacks"), feedbackData);

                // --- SUCCCESS: Show Thank You Screen Immediately ---
                document.body.innerHTML = `
                    <div class="flex flex-col items-center justify-center min-h-screen text-center p-6 animate-fade-in">
                        <div class="bg-white p-10 rounded-3xl shadow-2xl border border-white/20 max-w-md w-full transform transition-all scale-100">
                            
                            <div class="mb-6">
                                <div class="w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto shadow-inner">
                                    <i class="fa-solid fa-check text-5xl text-green-500 drop-shadow-sm"></i>
                                </div>
                            </div>
                            
                            <h1 class="text-3xl font-bold text-gray-800 mb-2 font-[Poppins] tracking-tight">Thank You!</h1>
                            <p class="text-gray-600 mb-6 font-[Poppins] leading-relaxed">
                                Your feedback has been successfully submitted to RU DEPOT.
                                <br><span class="text-sm text-gray-400 mt-2 block">మీ ఫీడ్‌బ్యాక్ మాకు అందింది. ధన్యవాదాలు!</span>
                            </p>
                            
                            <div class="border-t border-gray-100 pt-6">
                                <button onclick="window.location.reload()" class="w-full px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition shadow-lg text-sm font-bold tracking-wide uppercase">
                                    Submit Another Response
                                </button>
                            </div>

                        </div>
                    </div>
                `;

            } catch (e) {
                console.error("Error:", e);
                alert("Error submitting feedback. Please check internet connection.");
                sendBtn.disabled = false;
                sendBtn.innerHTML = 'Submit Feedback (పంపండి)';
            } 
        }
    </script>
</body>
</html>